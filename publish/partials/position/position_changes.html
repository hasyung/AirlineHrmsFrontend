<div flex="flex" nb-table="ctrl.records" nb-safe-src="ctrl.changes" ng-init="ctrl.changes = ctrl.PositionChange.$collection().$refresh()" class="app-content-wrapper"><div nb-search="nb-search" class="search-container"><div nb-predicate="岗位名称" predicate-attr="name"><input name="name" placeholder="岗位名称" ng-model="name"/></div><div nb-predicate="机构" predicate-attr="department_ids"><ui-select multiple="multiple" ng-model="$parent.department_ids" theme="select2" style="width:600px" reset-search-input="true"><ui-select-match placeholder="请输入机构名称">{{ $item.name }}</ui-select-match><ui-select-choices repeat="org.id as org in allOrgs | filter:$select.search | limitTo: 5">{{ org.name }}</ui-select-choices></ui-select></div><div nb-predicate="创建时间" predicate-attr="created_at"><input ng-model="created_at.from" bs-datepicker="bs-datepicker"/><span class="gap">至</span><input ng-model="created_at.to" bs-datepicker="bs-datepicker"/></div></div><div class="search-btn-group"><md-button nb-pipe="ctrl.searchChanges(tableState)" class="md-raised purple">开始搜索</md-button></div><div class="table-container"><h4>岗位变更记录列表</h4><table class="table table-striped custom-table"><thead><tr><th>编号</th><th>岗位名称</th><th>所属部门</th><th>操作</th><th>信息变更模块</th><th>变更时间</th></tr></thead><tbody nb-popup-management="nb-popup-management"><tr ng-repeat="change in ctrl.changes track by $index"><td ng-bind="$index + 1"></td><td ng-bind="change.name"></td><td ng-bind="change.department.name"></td><td ng-bind="change.action"></td><td ng-if="change.action == '修改'"><a href="javascript:;" ng-click="ctrl.mdDialog.show({templateUrl:'partials/common/update_change_review.tpl.html',locals:{data:change}, controller:'DialogCtrl', controllerAs:'ctrl'})">{{change.auditableType}}</a></td><td ng-if="change.action == '新增' || change.action == '删除'"><a href="javascript:;" ng-click="ctrl.mdDialog.show({templateUrl:'partials/common/create_change_review.tpl.html',locals:{data:change}, controller:'DialogCtrl', controllerAs:'ctrl'})">{{record.auditableType}}</a></td><td ng-bind="change.createdAt | date:'yyyy-MM-dd'"></td></tr></tbody></table></div><div nb-pagination="ctrl.records.$metadata" per-page="15" class="custom-pages"></div></div>