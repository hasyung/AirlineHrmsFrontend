
aside.org-aside
    section.org-detail
        .org-title.org-form-row
            span(ng-show="state != 'newsub'") 机构信息
            span(ng-show="state= 'newsub'") 新增子机构信息
            div(ng-if="!(ctrl.state.includes('org_history') || org.status == 'destroy_inactive')")
                button.btn.btn-default.fa.fa-trash-o(title="删除", nb-popup)
                    popup-template.org-delete-template.panel.panel-default()
                        .panel-heading.popup-title 警告
                        .panel-body.popup-body
                            div 删除后将无法恢复，请确认删除
                            div.div-delete-btn.pull-right(ng-click="destory()") 删除
                button.btn.btn-default.fa.fa-retweet(title="划转" ng-click="ctrl.openOrgtreeDialog()")
                button.btn.btn-default.fa.fa-pencil(ui-sref="^.edit({orgId: org.id})",title="编辑")
                button.btn.btn-default.fa.fa-plus(title="新增子机构",ui-sref="^.newsub({parentId: org.id})", ng-if="org.grade.name !== 'secondly_positive'")

        //- show
        .org-info
            .form-group.row
                label.control-label.col-lg-5.org-label 名称：
                .col-lg-5 {{org.name}}
            .form-group.row
                label.control-label.col-lg-5.org-label 编号：
                .col-lg-5 {{org.serialNumber}}
            .form-group.row
                label.control-label.col-lg-5.org-label 办公地点：
                .col-lg-5 {{org.location.displayName}}
            .form-group.row
                label.control-label.col-lg-5.org-label 职级：
                .col-lg-5 {{org.grade.displayName}}
        //- update
        .org-info.org-form-row
            form(novalidate, ng-submit="update(org)", name="form")
                .form-group.row
                    label.control-label.col-lg-4.org-label 名称：
                    .col-lg-5
                        input(ng-model="org.name", required="true", name="orgName")
                        div(ng-messages="form.orgName.$error", ng-if="form.orgName.$touched")
                            .form-group-error(ng-message="required") 名称必填
                .form-group.row
                    label.control-label.col-lg-4.org-label 编号：
                    .col-lg-5 {{::org.serialNumber}}
                .form-group.row
                    label.control-label.col-lg-4.org-label 办公地点：
                    .col-lg-5
                        nb-dropdown(ng-model="org.location" remote-key="Department.locations", name="orgAddr", required="true")
                        div(ng-messages="form.orgAddr.$error", ng-if="form.orgAddr.$touched")
                            .form-group-error(ng-message="required") 地点必选

                .form-group.row
                    label.control-label.col-lg-4.org-label 职级：
                    .col-lg-5 {{::org.grade.displayName}}

                .form-group.row
                    input.btn.btn-info.pull-right(type="submit",value="保存" ,ng-disabled="!form.$valid")
                    button.btn.btn-default.pull-right(ui-sref="^.show({orgId: org.id})") 取消

         //- new sub
        .org-info.org-form-row
            form(novalidate, ng-submit="ctrl.newSubOrg(org)", name="form")
                .form-group.row
                    label.control-label.col-lg-5.org-label 名称：
                    .col-lg-5
                        input(ng-model="org.name", type="text", required="true", name="orgName")
                        div(ng-messages="form.orgName.$error", ng-if="form.orgName.$touched")
                            .form-group-error.col-lg-12(ng-message="required") 名称必填

                .form-group.row
                    label.control-label.col-lg-5.org-label 办公地点：
                    .col-lg-5
                        nb-dropdown(ng-model="org.location" remote-key="Department.locations", required="true", name="orgAddr")

                        div(ng-messages="form.orgAddr.$error", ng-if="form.orgAddr.$touched")
                            .form-group-error(ng-message="required") 地点必选

                .form-group.row
                    label.control-label.col-lg-5.org-label 职级：
                    .col-lg-5
                        nb-dropdown(ng-model="org.grade" remote-key="Department.department_grades", required="true", name="orgType", additory="false")
                        div(ng-messages="form.orgType.$error", ng-if="form.orgType.$touched || form.orgType.$dirty")
                            .form-group-error(ng-message="required") 职级必选

                .form-group.row
                    input.btn.btn-info.pull-right(type="submit",value="保存",ng-disabled="!form.$valid")
                    button.btn.btn-default.pull-right(ui-sref="^.show") 取消


    section
        .org-title(ng-if="org.status !== 'destroy_inactive'")
            span 下属岗位信息
            button.btn.btn-default.fa.fa-cog(title="设置" ng-click="ctrl.openPositionPanel(org.id)")
        table.table.table-striped.org-table(ng-if="org.status !== 'destroy_inactive'")
            thead
                tr
                    th 岗位名称
                    th  编制
                    th  在编人数
            tbody
                tr
                    td.org-post(ng-click="") 总经理
                    td  3
                    td  2
                tr
                    td.org-post 主任
                    td  2
                    td  1
                tr
                    td.org-post 副主任
                    td  2
                    td  2
