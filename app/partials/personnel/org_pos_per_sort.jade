div(ng-controller="PersonnelSort as ctrl")
    div(layout ng-init="initData = {};")

        div(flex)
            section
                md-subheader 机构
                div
                    div(style="padding: 5px 10px;font-size:20px;")
                        button.btn.btn-info(ng-click="ctrl.orgSelectBack()") 返回
                    div(height="300px" slimscroll style="padding: 5px 10px;")
                        md-list
                            md-list-item(
                                layout="row"
                                ng-repeat="org in ctrl.currentOrgs.children"
                                ng-click="initData.selectOrg = org;\
                                    initData.positions = ctrl.Position.$collection().$refresh({department_id:org.id});\
                                    initData.employees = ctrl.Employee.$collection().$refresh({department_id:org.id});\
                                "
                                ng-class="{'active': initData.selectOrg.id == org.id}"

                            )
                                span(flex="40" ng-bind="org.label")
                                button(flex="20" ng-click="ctrl.showChildsOrg(org)" ng-if="org.children") 展开
                                button(flex="20" ng-click="ctrl.setHeigher(ctrl.currentOrgs.children, $index)") 向上
                                button(flex="20" ng-click="ctrl.setLower(ctrl.currentOrgs.children, $index)") 向下


        div(flex)
            section()
                md-subheader 岗位

                md-list
                    md-list-item(
                        layout="row"
                        ng-repeat="pos in initData.positions"
                    )
                        span(flex="60" ng-bind="pos.name")
                        button(flex) 向上
                        button(flex) 向下
    div(flex)
        section
            md-subheader 员工列表
            .table-container
                h4 人事信息列表
                table.table.table-striped.custom-table
                    thead
                        tr
                            th 所属部门
                            th 姓名
                            th 员工编号
                            th 岗位
                            th 操作
                    tbody
                        tr(ng-repeat="emp in initData.employees track by emp.id")
                            td(ng-bind="emp.department.name")
                            td.org-post
                                //- a(ui-sref="^.detail.basic({empId: emp.id})" ng-bind="emp.name")
                                a(
                                    nb-panel
                                    template-url="partials/personnel/info_basic.html"
                                    ng-bind="emp.name"
                                    locals="{employee: emp}"
                                )
                            td(ng-bind="::emp.employeeNo")
                            td(ng-bind="emp.position.name")
                            td
                                button 向上
                                button 向下

