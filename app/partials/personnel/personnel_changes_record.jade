div(nb-table='ctrl.records' nb-safe-src="ctrl.records" ng-init="ctrl.records = ctrl.records.$refresh()")
        .search-container(nb-search)
            div(nb-predicate="姓名" predicate-attr="name")
                input(name="name" placeholder="姓名" ng-model="name")
            div(nb-predicate="员工编号" predicate-attr="employee_no")
                input(name="employee_no" placeholder="工号" ng-model="employee_no")
            div(nb-predicate="机构" predicate-attr="department_ids")
                ui-select(multiple ng-model="$parent.department_ids" theme="select2" style="width:600px" reset-search-input="true")
                    ui-select-match(placeholder="请输入机构名称") {{ $item.name }}
                    ui-select-choices(repeat="org.id as org in allOrgs | filter:$select.search | limitTo: 5") {{ org.name }}

            div(nb-predicate="岗位名称" predicate-attr="position_name")
                input(name="position_name" placeholder="岗位名称" ng-model="position_name")


            div(nb-predicate="岗位通道" predicate-attr="channel_id")
                nb-dropdown( ng-model="channel_id", remote-key="channels", map="$item.id" name="channel_id" required)

            div(nb-predicate="属地" predicate-attr="location_id")
                nb-dropdown( ng-model="location_id", remote-key="locations", map="$item.id" name="location_id" required)

            div(nb-predicate="出生日期" predicate-attr="birthday")
                input(ng-model="birthday.from" bs-datepicker)
                span.gap 至
                input(ng-model="birthday.to" bs-datepicker)
        .search-btn-group
            button.btn.btn-primary(nb-pipe="ctrl.searchRecord(tableState)") 开始搜索

        .table-container
            h4 人事信息列表
            table.table.table-striped.custom-table
                thead
                    tr
                        th 员工编码
                        th 姓名
                        th 所属部门
                        th 信息变更模块
                        th 变更类型
                        th 变更时间
                        th 状态
                        th 审核时间
                        th 理由
                tbody
                    tr(ng-repeat="record in ctrl.records track by $index")
                        td(ng-bind="record.employeeNo")
                        td(ng-bind="record.name")
                        td(ng-bind="record.department.name")

                        td()
                            span(nb-popup-plus, position="left-bottom", offset="0.5") {{record.auditableType}}
                                popup-template.nb-popup.org-default-popup-template.panel.panel-default()
                                    .panel-heading.popup-title {{record.name}}的基本变更
                                    .panel-body.popup-body
                                        .row
                                            .col-md-6 修改前
                                            .col-md-6 修改后
                                        .row(ng-repeat="(field, val) in record.auditedChanges")
                                            .col-md-2() {{::field}}：
                                            .col-md-4(ng-bind="val[0]")
                                            .col-md-2() {{::field}}：
                                            .col-md-4(ng-bind="val[1]")

                        td(ng-bind="record.action")
                        td(ng-bind="record.createdAt | date:'yyyy-MM-dd'")
                        td(ng-bind="record.status")
                        td(ng-bind="record.checkDate | date:'yyyy-MM-dd'")
                        td(ng-bind="record.reason")
