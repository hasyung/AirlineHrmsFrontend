md-toolbar
    .md-toolbar-tools
        span 人/岗/机构&nbsp;排序
.personnel-sort-body(ng-controller="PersonnelSort as ctrl" style="margin-left: 10px;")
    div(layout ng-init="initData = {};")

        section.org-sort-container(flex)
            md-subheader.offset-header-text 机构
            div
                .cust-content-toolbar
                    i.fa.fa-angle-left(ng-click="ctrl.orgSelectBack()")
                    span(style="font-size:18px; margin-left:15px;" ng-bind="ctrl.orgLinks[ctrl.orgLinks.length-1].label") 人力资源部
                .org-sort-content(height="300px" slimscroll)
                    md-list
                        md-list-item.cust-list-item(
                            ng-repeat="org in ctrl.currentOrgs.children"
                            ng-class="{'active': initData.selectOrg.id == org.id}"
                        )
                            .list-row(flex
                                layout="row"
                                ng-click="initData.selectOrg = org;\
                                    initData.positions = ctrl.Position.$collection().$refresh({department_id:org.id});\
                                    initData.employees = ctrl.Employee.$collection().$refresh({department_id:org.id});\
                                "
                            )
                                .list-text(flex="50" ng-bind="org.label")
                                .open-orgs(flex="40")
                                    i.fa.fa-caret-right(ng-click="ctrl.showChildsOrg(org)" ng-if="org.children")
                                span(flex="10")
                                    .icon-container
                                        i.fa.fa-angle-up(ng-click="ctrl.setHeigher(ctrl.currentOrgs.children, $index, 'department')")
                                    .icon-container
                                        i.fa.fa-angle-down(ng-click="ctrl.setLower(ctrl.currentOrgs.children, $index, 'department')")


        section.pos-sort-container(flex)
            md-subheader.offset-header-text 岗位
            div(height="300px" slimscroll)
                md-list
                    md-list-item.cust-list-item(
                        layout="row"
                        ng-repeat="pos in initData.positions"
                        ng-class="{'active': initData.selectPos.id == pos.id}"
                    )
                        .list-row(flex layout="row" ng-click="initData.selectPos = pos;")
                            .list-text(flex="90" ng-bind="pos.name")
                            span(flex="10")
                                .icon-container
                                    i.fa.fa-angle-up(ng-click="ctrl.setHeigher(initData.positions, $index, 'position')")
                                .icon-container
                                    i.fa.fa-angle-down(ng-click="ctrl.setLower(initData.positions, $index, 'position')")
    div(flex)
        section
            md-subheader.offset-header-text 员工列表
            .table-container
                table.table.employees-sort
                    thead
                        tr
                            th 所属部门
                            th 姓名
                            th 员工编号
                            th 岗位
                            th 操作
                    tbody
                        tr(
                            ng-repeat="emp in initData.employees track by emp.id"
                            ng-click="initData.selectEmp = emp;"
                            ng-class="{'active': initData.selectEmp.id == emp.id}"
                        )
                            td(ng-bind="emp.department.name")
                            td(ng-bind="emp.name")
                            td(ng-bind="::emp.employeeNo")
                            td(ng-bind="emp.position.name")
                            td
                                .icon-container
                                    i.fa.fa-angle-up(ng-click="ctrl.setHeigher(initData.employees, $index, 'employee')")
                                .icon-container
                                    i.fa.fa-angle-down(ng-click="ctrl.setLower(initData.employees, $index, 'employee')")

