extends leave_layout

block vars
    - var flowType = 'Flow::MiscarriageLeave'

block relation_data
    div.flow-info-row(layout)
        .flow-info-cell(flex)
            .flow-cell-title 性别
            .flow-cell-content 女
        .flow-info-cell(flex)
            .flow-cell-title 婚姻状况
            .flow-cell-content 已婚
    div.flow-info-row(layout)
        .flow-info-cell(flex)
            .flow-cell-title 年龄
            .flow-cell-content 30
        .flow-info-cell(flex)
                .flow-cell-title 川航工作年限
                .flow-cell-content 15年
    div.flow-info-row(layout)
        .flow-info-cell(flex)
            .flow-cell-title 假别
            .flow-cell-content 产假

block form
    div(layout)
        md-input-container.row-has-value(flex)
            label 怀孕时段
            md-select(ng-model="current.recordType" required)
                md-select-label {{current.recordType||'无'}}
                md-option(value="4个月以下") 4个月以下
                md-option(value="4个月以上") 4个月以上
    div(layout)
        md-input-container(flex)
            label 开始日期
            input(ng-model="request.start_time" ng-change="calculateTotalDays(request, '年假')" name="start_time" bs-datepicker required)
        md-input-container(flex)
            label 结束日期
            input(ng-model="request.end_time" ng-change="calculateTotalDays(request, '年假')" name="end_time" required bs-datepicker)
    div(layout)
        .without-edit
            div.progress-wrapper(ng-if="calculating")
                md-progress-circular(md-mode="indeterminate")
            div(ng-if="!calculating")
                div.without-edit-title 天数
                div.without-edit-content {{ vacation_days }} 天
    div(layout)
        md-input-container(flex)
            label 申请理由
            textarea(ng-model="request.reason" columns="1" md-maxlength="2000")
    md-subheader.accessory-header.md-background.md-hue-1 附件
    div(nb-file-upload flow-type="#{flowType}" ng-model="request.attachment_ids")

